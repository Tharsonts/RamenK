<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RamenK - Culin√°ria Japonesa Aut√™ntica</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/ramenk-redesign.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üçú</text></svg>">
</head>
<body>
    <!-- Mobile Toggle Button -->
    <button class="mobile-toggle" onclick="toggleSidebar()" aria-label="Toggle menu">
        ‚ò∞
    </button>

    <!-- Sidebar Navigation -->
    <nav class="sidebar" id="sidebar" role="navigation" aria-label="Menu principal">
        <div class="sidebar-header">
            <div class="sidebar-logo" aria-label="Logo RamenK">üçú</div>
            <h1 class="sidebar-title">RamenK</h1>
            <p class="sidebar-subtitle">ÂíåÈ£ü„ÅÆÂøÉ</p>
        </div>
        
        <nav class="sidebar-navigation">
            <div class="menu-category">
                <h3 class="category-title">Menu</h3>
                <div class="menu-auto-layout" id="menuAutoLayout">
                    {% for section in menu_sections %}
                        {% if section.get('visible', True) %}
                        <div class="sidebar-menu-item">
                            <a href="#{{ section['id'] }}" class="sidebar-menu-link" onclick="scrollToSection('{{ section['id'] }}')" aria-label="Ir para {{ section['name'] }}">
                                <span class="sidebar-menu-icon" aria-hidden="true">{{ section['icon'] }}</span>
                                <span class="menu-text">{{ section['name'] }}</span>
                            </a>
                        </div>
                        {% endif %}
                    {% endfor %}
                </div>
            </div>
            

        </nav>
        
        <!-- Sidebar Footer with Instagram -->
        <div class="sidebar-footer">
            <div class="category-divider"></div>
            <a href="https://instagram.com/espacoramenk" target="_blank" class="instagram-link" aria-label="Siga-nos no Instagram">
                <i class="fab fa-instagram"></i> @espacoramenk
            </a>
        </div>
    </nav>

    <!-- Hero Section -->
    <header class="hero-section" role="banner">
        <div class="hero-content">
            <div class="hero-logo-circle">
                <div class="hero-logo" aria-label="Logo principal RamenK">üçú</div>
            </div>
            <h1 class="hero-title">RamenK</h1>
            <p class="hero-subtitle">ÂíåÈ£ü„ÅÆÂøÉ ‚Ä¢ A Ess√™ncia da Culin√°ria Japonesa</p>
            <button class="hero-cta" onclick="scrollToSection('noodles')" aria-label="Ver card√°pio completo">
                Ver Card√°pio Completo
            </button>
            
            <!-- Informa√ß√µes da Unidade -->
            <div class="restaurant-info">
                <div class="info-item">
                    <span class="info-icon">üèÆ</span>
                    <span class="info-text">Unidade 1 ‚Äì Quintal dos Sabores</span>
                </div>
                <div class="info-item">
                    <span class="info-icon">üó∫Ô∏è</span>
                    <span class="info-text">Rua Apotribu, 101 ‚Äì Metr√¥ Sa√∫de</span>
                </div>
                <div class="info-item">
                    <span class="info-icon">üïí</span>
                    <span class="info-text">Ter√ßa a S√°bado: 12h ‚Äì 21:30h | Domingo: 12h ‚Äì 16h</span>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-container" role="main">
        {% for section in menu_sections %}
        {% if section.visible %}
        <section class="menu-section" id="{{ section['id'] }}" aria-labelledby="title-{{ section['id'] }}">
            <div class="section-header">
                <h2 class="section-title" id="title-{{ section['id'] }}">{{ section['name'] }}</h2>
                {% if section.get('subtitle') %}
                <p class="section-subtitle">{{ section['subtitle'] }}</p>
                {% endif %}
                <div class="section-divider" aria-hidden="true"></div>
            </div>
            
            <!-- Exibir itens diretos da se√ß√£o primeiro -->
            {% if section.get('items') %}
                <div class="menu-grid">
                    {% for item in section['items'] %}
                    <article class="menu-card" onclick="openDishModal('{{ item['name'] }}', '{{ item['price'] }}', '{{ item.get('description', '') }}', '{{ section['name'] }}', '{{ item.get('image_path', '') }}')">
                        {# N√£o mostrar imagem na listagem - deixe comentado ou remova #}
                        {# {% if item.get('image_path') %}
                        <div class="card-image">
                            <img src="{{ url_for('static', filename=item['image_path']) }}" alt="{{ item['name'] }}" loading="lazy">
                        </div>
                        {% endif %} #}

                        <div class="card-header">
                            <div class="card-icon" aria-hidden="true">{{ item.get('icon', 'üçΩÔ∏è') }}</div>
                            <div class="card-info">
                                <h3 class="card-title">{{ item['name'] }}</h3>
                                {% if item.get('description') %}
                                <p class="card-description">{{ item['description'] }}</p>
                                {% endif %}
                            </div>
                        </div>
                        <div class="card-footer">
                            <button class="card-price" aria-label="Pre√ßo: {{ item['price'] }}">
                                {{ item['price'] }}
                            </button>
                        </div>
                    </article>
                    {% endfor %}
                </div>
            {% endif %}
            
            <!-- Exibir subse√ß√µes se existirem -->
            {% if section.get('subsections') %}
                {% for subsection in section['subsections'] %}
                {% if subsection.get('items') %}
                <div class="subsection">
                    <h3 class="subsection-title">{{ subsection['title'] }}</h3>
                    {% if subsection.get('description') %}
                    <div class="subsection-description">
                        {{ subsection['description'] }}
                    </div>
                    {% endif %}
                    <div class="menu-grid">
                        {% for item in subsection['items'] %}
                        <article class="menu-card" onclick="openDishModal('{{ item['name'] }}', '{{ item['price'] }}', '{{ item.get('description', '') }}', '{{ section['name'] }}', '{{ item.get('image_path', '') }}')">
                            <div class="card-header">
                                <div class="card-icon" aria-hidden="true">üçΩÔ∏è</div>
                                <div class="card-info">
                                    <h4 class="card-title">{{ item['name'] }}</h4>
                                    {% if item.get('description') %}
                                    <p class="card-description">{{ item['description'] }}</p>
                                    {% endif %}
                                </div>
                            </div>
                            <div class="card-footer">
                                <button class="card-price" aria-label="Pre√ßo: {{ item['price'] }}">
                                    {{ item['price'] }}
                                </button>
                            </div>
                        </article>
                        {% endfor %}
                    </div>
                </div>
                {% endif %}
                {% endfor %}
            {% endif %}
        </section>
        {% endif %}
        {% endfor %}
    </main>

    <!-- Footer -->
    <footer class="footer" role="contentinfo">
        <div class="footer-content">
            <h2 class="footer-title">RamenK</h2>
            <div class="footer-info">
                <div class="footer-section">
                    <h4>Hor√°rio de Funcionamento</h4>
                    <p>Segunda a Sexta: 11h √†s 22h<br>
                    S√°bado e Domingo: 12h √†s 23h</p>
                </div>
                <div class="footer-section">
                    <h4>Contato</h4>
                    <p>Instagram: @espacoramenk<br>
                    Delivery e Reservas</p>
                </div>
                <div class="footer-section">
                    <h4>Localiza√ß√£o</h4>
                    <p>Culin√°ria Japonesa Aut√™ntica<br>
                    ÂíåÈ£ü„ÅÆÂøÉ</p>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // Mobile sidebar toggle
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('open');
        }

        // Smooth scroll to section - Enhanced version
        function scrollToSection(sectionId) {
            const element = document.getElementById(sectionId);
            if (element) {
                // Calculate offset to account for any fixed headers
                const headerOffset = 80; // Adjust this value based on your header height
                const elementPosition = element.getBoundingClientRect().top;
                const offsetPosition = elementPosition + window.pageYOffset - headerOffset;
                
                // Use smooth scrolling with custom duration
                smoothScrollTo(offsetPosition, 800); // 800ms duration
            }
            
            // Close mobile sidebar after navigation
            if (window.innerWidth <= 768) {
                const sidebar = document.getElementById('sidebar');
                sidebar.classList.remove('open');
            }
        }

        // Custom smooth scroll function for better control
        function smoothScrollTo(targetPosition, duration) {
            const startPosition = window.pageYOffset;
            const distance = targetPosition - startPosition;
            let startTime = null;

            function animation(currentTime) {
                if (startTime === null) startTime = currentTime;
                const timeElapsed = currentTime - startTime;
                const run = easeInOutCubic(timeElapsed, startPosition, distance, duration);
                window.scrollTo(0, run);
                if (timeElapsed < duration) requestAnimationFrame(animation);
            }

            // Easing function for smooth animation
            function easeInOutCubic(t, b, c, d) {
                t /= d / 2;
                if (t < 1) return c / 2 * t * t * t + b;
                t -= 2;
                return c / 2 * (t * t * t + 2) + b;
            }

            requestAnimationFrame(animation);
        }

        // Close sidebar when clicking outside on mobile
        document.addEventListener('click', function(event) {
            const sidebar = document.getElementById('sidebar');
            const toggle = document.querySelector('.mobile-toggle');
            
            if (window.innerWidth <= 768 && 
                sidebar && toggle &&
                !sidebar.contains(event.target) && 
                !toggle.contains(event.target)) {
                sidebar.classList.remove('open');
            }
        });

        // Update active navigation on scroll
        function updateActiveNavigation() {
            const sections = document.querySelectorAll('.menu-section');
            const navLinks = document.querySelectorAll('.sidebar-menu-link');
            
            let current = '';
            sections.forEach((section) => {
                const sectionTop = section.getBoundingClientRect().top;
                if (sectionTop <= 200) {
                    current = section.getAttribute('id');
                }
            });

            navLinks.forEach((link) => {
                link.classList.remove('active');
                if (link.getAttribute('href') === '#' + current) {
                    link.classList.add('active');
                }
            });
        }

        // Throttled scroll event
        let scrollTimeout;
        window.addEventListener('scroll', function() {
            if (scrollTimeout) {
                clearTimeout(scrollTimeout);
            }
            scrollTimeout = setTimeout(updateActiveNavigation, 100);
        });

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            updateActiveNavigation();
            console.log('RamenK redesign loaded successfully!');
        });
    </script>

    <!-- Modal para Detalhes dos Pratos -->
    <div id="dishModal" class="modal-overlay">
        <div class="modal-container">
            <div class="modal-header">
                <h2 id="modalTitle" class="modal-title"></h2>
                <button class="modal-close" onclick="closeDishModal()" aria-label="Fechar">√ó</button>
            </div>
            <div class="modal-content">
                <div class="modal-image">
                    <img id="modalImage" src="" alt="" class="dish-image">
                </div>
                <div class="modal-info">
                    <div id="modalCategory" class="modal-category"></div>
                    <p id="modalDescription" class="modal-description"></p>
                    <div id="modalFeatures" class="modal-features"></div>
                    <div class="modal-price-container">
                        <span id="modalPrice" class="modal-price"></span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Fun√ß√£o para abrir modal com detalhes do prato
        function openDishModal(name, price, description, category, imagePath) {
            const modal = document.getElementById('dishModal');
            const modalTitle = document.getElementById('modalTitle');
            const modalCategory = document.getElementById('modalCategory');
            const modalImage = document.getElementById('modalImage');
            const modalDescription = document.getElementById('modalDescription');
            const modalFeatures = document.getElementById('modalFeatures');
            const modalPrice = document.getElementById('modalPrice');

            // Configurar conte√∫do do modal
            modalTitle.textContent = name;
            modalCategory.textContent = category;
            modalPrice.textContent = price;
            
            // Descri√ß√µes detalhadas para cada prato
            const detailedDescriptions = getDishDescription(name, description, category);
            modalDescription.textContent = detailedDescriptions.description;
            
            // Configurar caracter√≠sticas do prato
            modalFeatures.innerHTML = '';
            if (detailedDescriptions.features && detailedDescriptions.features.length > 0) {
                detailedDescriptions.features.forEach(feature => {
                    const featureDiv = document.createElement('div');
                    featureDiv.className = 'modal-feature';
                    featureDiv.innerHTML = `
                        <span class="modal-feature-icon">${feature.icon}</span>
                        <span class="modal-feature-text">${feature.text}</span>
                    `;
                    modalFeatures.appendChild(featureDiv);
                });
            }
            
            // Configurar imagem - usar imagePath do banco de dados se dispon√≠vel, sen√£o usar a hardcoded
            if (imagePath && imagePath.trim() !== '') {
                modalImage.src = '/static/' + imagePath;
            } else {
                modalImage.src = detailedDescriptions.image;
            }
            modalImage.alt = name;

            // Mostrar modal com anima√ß√£o
            modal.style.display = 'flex';
            document.body.style.overflow = 'hidden';
            
            // Adicionar classe para anima√ß√£o
            setTimeout(() => {
                modal.querySelector('.modal-container').style.transform = 'translateY(0) scale(1)';
            }, 10);
        }

        // Fun√ß√£o para fechar modal
        function closeDishModal() {
            const modal = document.getElementById('dishModal');
            modal.style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // Fechar modal ao clicar fora
        document.addEventListener('click', function(event) {
            const modal = document.getElementById('dishModal');
            if (event.target === modal) {
                closeDishModal();
            }
        });

        // Fechar modal com ESC
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                closeDishModal();
            }
        });

        // Fun√ß√£o para obter descri√ß√µes detalhadas dos pratos
        function getDishDescription(name, originalDescription, category) {
            const descriptions = {
                // Card√°pio Executivo
                'PF de Espetinhos - 1 Espeto': {
                    description: 'Este prato √© uma verdadeira combina√ß√£o de sabores: um espeto grelhado no ponto perfeito, com carnes como frango, lingui√ßa e carne bovina, acompanhados de arroz soltinho. Uma refei√ß√£o simples e saborosa, ideal para quem busca um almo√ßo r√°pido e delicioso, sem abrir m√£o do sabor.',
                    image: '/static/img/executivo/pf-espetinhos-1-espeto.jpg',
                    features: [
                        { icon: 'üî•', text: 'Grelhado' },
                        { icon: 'ü•©', text: 'Carnes Variadas' },
                        { icon: 'üçö', text: 'Arroz' },
                        { icon: '‚ö°', text: 'R√°pido' }
                    ]
                },
                'PF de Espetinhos - 2 Espetos': {
                    description: 'Vers√£o generosa do nosso popular PF de espetinhos, com dois espetos suculentos grelhados no carv√£o. Carnes variadas incluindo frango temperado, lingui√ßa artesanal e carne bovina macia, servidos com arroz fresquinho e salada. Perfeito para quem tem um apetite maior.',
                    image: '/static/img/executivo/pf-espetinhos-2-espetos.jpg',
                    features: [
                        { icon: 'üî•', text: 'Grelhado' },
                        { icon: 'ü•©', text: 'Por√ß√£o Dupla' },
                        { icon: 'ü•ó', text: 'Com Salada' },
                        { icon: 'üí™', text: 'Apetite Grande' }
                    ]
                },
                'Lamen Shoyu': {
                    description: 'Nosso aut√™ntico l√°men shoyu preparado com caldo dourado e arom√°tico, macarr√£o artesanal al dente, fatias de chashu macias, ovo marinado, cebolinha fresca e alga nori. Uma experi√™ncia gastron√¥mica que transporta voc√™ diretamente ao Jap√£o.',
                    image: '/static/img/pratos-principais/lamen-shoyu.jpg',
                    features: [
                        { icon: 'üçú', text: 'Caldo Dourado' },
                        { icon: 'ü•¢', text: 'Artesanal' },
                        { icon: 'ü•ö', text: 'Ovo Marinado' },
                        { icon: 'üáØüáµ', text: 'Aut√™ntico' }
                    ]
                },
                'Lamen Misso': {
                    description: 'L√°men com base de misso caseiro, criando um caldo encorpado e saboroso com notas umami intensas. Acompanha macarr√£o fresco, chashu suculento, ovo perfeitamente cozido, brotos de bambu, cebolinha e uma pitada de pimenta vermelha para um toque especial.',
                    image: '/static/img/pratos-principais/lamen-misso.jpg',
                    features: [
                        { icon: 'üç≤', text: 'Misso Caseiro' },
                        { icon: 'üåä', text: 'Umami' },
                        { icon: 'üå∂Ô∏è', text: 'Picante' },
                        { icon: 'ü•Ñ', text: 'Encorpado' }
                    ]
                },
                'Hiyashi Lamen': {
                    description: 'Macarr√£o artesanal no caldo gelado √† base de shitake e kombu temperado com shoyu e vinagre. Com cenoura, pepino, omelete, rosbife de lombo su√≠no e nori. Uma experi√™ncia refrescante e √∫nica que combina sabores intensos em uma apresenta√ß√£o colorida e equilibrada.',
                    image: '/static/img/pratos-principais/lamen-hiyashi.jpg',
                    features: [
                        { icon: '‚ùÑÔ∏è', text: 'Caldo Gelado' },
                        { icon: 'üçÑ', text: 'Shitake & Kombu' },
                        { icon: 'ü•©', text: 'Rosbife Su√≠no' },
                        { icon: 'üåà', text: 'Colorido' }
                    ]
                },
                'Gyoza': {
                    description: 'Deliciosos past√©is japoneses com massa fina e recheio suculento de carne de porco temperada com gengibre, alho e cebolinha. Grelhados at√© ficarem dourados e crocantes na base, servidos com molho especial de soja e vinagre. Uma entrada perfeita e tradicional.',
                    image: '/static/img/porcoes-acompanhamentos/gyoza.jpg',
                    features: [
                        { icon: 'ü•ü', text: 'Massa Fina' },
                        { icon: 'üî•', text: 'Crocante' },
                        { icon: 'üßÑ', text: 'Temperado' },
                        { icon: 'ü•¢', text: 'Tradicional' }
                    ]
                },
                'Harumaki': {
                    description: 'Rolinhos primavera crocantes e dourados, recheados com vegetais frescos, brotos de feij√£o, cenoura juliana e repolho. Fritos na temperatura perfeita para garantir uma casca crocante e interior suculento. Acompanha molho agridoce tradicional.',
                    image: '/static/img/porcoes-acompanhamentos/harumaki.jpg',
                    features: [
                        { icon: 'ü•ï', text: 'Vegetais Frescos' },
                        { icon: 'üî•', text: 'Crocante' },
                        { icon: 'üçØ', text: 'Molho Agridoce' },
                        { icon: 'üå±', text: 'Leve' }
                    ]
                },
                'Temaki Salm√£o': {
                    description: 'Cone de alga nori crocante recheado com arroz temperado, fatias generosas de salm√£o fresco, pepino em juliana e uma pitada de gergelim. Preparado na hora para garantir a textura perfeita, √© uma explos√£o de sabores do mar em cada mordida.',
                    image: '/static/img/sushi-bar/temaki-salmao.jpg',
                    features: [
                        { icon: 'üêü', text: 'Salm√£o Fresco' },
                        { icon: 'üçö', text: 'Arroz Temperado' },
                        { icon: 'ü•í', text: 'Pepino Crocante' },
                        { icon: 'üåä', text: 'Sabor do Mar' }
                    ]
                },
                'Temaki Kani': {
                    description: 'Temaki recheado com kani desfiado (caranguejo), abacate cremoso, pepino crocante e maionese especial. O sabor suave do kani combina perfeitamente com a cremosidade do abacate, criando uma experi√™ncia √∫nica e refrescante.',
                    image: '/static/img/sushi-bar/temaki-kani.jpg',
                    features: [
                        { icon: 'ü¶Ä', text: 'Kani Fresco' },
                        { icon: 'ü•ë', text: 'Abacate Cremoso' },
                        { icon: 'ü•í', text: 'Pepino' },
                        { icon: 'üçÉ', text: 'Refrescante' }
                    ]
                },
                'Hot Roll Philadelphia': {
                    description: 'Uramaki empanado e frito, recheado com salm√£o fresco e cream cheese, coberto com uma cremosa mistura de queijos gratinados. Servido quente e crocante por fora, cremoso por dentro, acompanhado de molho tar√™ doce e gergelim torrado.',
                    image: '/static/img/sushi-bar/hot-roll-philadelphia.jpg',
                    features: [
                        { icon: 'üî•', text: 'Servido Quente' },
                        { icon: 'üßÄ', text: 'Cream Cheese' },
                        { icon: 'üêü', text: 'Salm√£o' },
                        { icon: '‚ú®', text: 'Empanado' }
                    ]
                },
                'Udon': {
                    description: 'Macarr√£o grosso e macio servido em caldo quente e reconfortante, acompanhado de tempur√° de legumes crocante, kamaboko, cebolinha fresca e uma folha de nori. Uma sopa tradicional japonesa perfeita para qualquer ocasi√£o.',
                    image: '/static/img/pratos-principais/udon.jpg',
                    features: [
                        { icon: 'üçú', text: 'Caldo Quente' },
                        { icon: 'üç§', text: 'Tempur√°' },
                        { icon: 'üçÉ', text: 'Cebolinha' },
                        { icon: 'üáØüáµ', text: 'Tradicional' }
                    ]
                },
                'Sob√°': {
                    description: 'Macarr√£o de trigo sarraceno servido gelado com molho tsuyu concentrado para mergulhar. Acompanha wasabi fresco, gengibre ralado e cebolinha. Uma op√ß√£o refrescante e saud√°vel, tradicionalmente consumida no ver√£o japon√™s.',
                    image: '/static/img/pratos-principais/soba.jpg',
                    features: [
                        { icon: '‚ùÑÔ∏è', text: 'Servido Gelado' },
                        { icon: 'üåø', text: 'Wasabi' },
                        { icon: 'ü´ö', text: 'Gengibre' },
                        { icon: 'üåû', text: 'Refrescante' }
                    ]
                },
                'Dorayaki': {
                    description: 'Pancakes japoneses macios e fofinhos recheados com doce de feij√£o azuki tradicional. Cada mordida oferece a do√ßura equilibrada do azuki envolvida pela textura macia e ligeiramente doce das pancakes. Uma sobremesa cl√°ssica e reconfortante.',
                    image: '/static/img/bebidas-drinks/dorayaki.jpg',
                    features: [
                        { icon: 'ü•û', text: 'Pancakes Macios' },
                        { icon: 'ü´ò', text: 'Feij√£o Azuki' },
                        { icon: 'üçØ', text: 'Doce Natural' },
                        { icon: '‚òÅÔ∏è', text: 'Textura Fofa' }
                    ]
                },
                'Mochi de Sorvete': {
                    description: 'Deliciosos bolinhos de massa de arroz macia e el√°stica recheados com sorvete cremoso nos sabores baunilha, chocolate ou morango. Uma sobremesa refrescante que combina a textura √∫nica do mochi com o sabor gelado do sorvete.',
                    image: '/static/img/bebidas-drinks/mochi-de-sorvete.jpg',
                    features: [
                        { icon: 'üç°', text: 'Massa de Arroz' },
                        { icon: 'üç¶', text: 'Sorvete Cremoso' },
                        { icon: '‚ùÑÔ∏è', text: 'Gelado' },
                        { icon: 'üé®', text: 'V√°rios Sabores' }
                    ]
                }
            };

            return descriptions[name] || {
                description: originalDescription || 'Delicioso prato preparado com ingredientes frescos e t√©cnicas tradicionais japonesas. Uma experi√™ncia gastron√¥mica √∫nica que combina sabor aut√™ntico com apresenta√ß√£o impec√°vel.',
                image: '/static/img/pratos-principais/placeholder.jpg',
                features: [
                    { icon: 'üçΩÔ∏è', text: 'Tradicional' },
                    { icon: 'üáØüáµ', text: 'Japon√™s' },
                    { icon: '‚ú®', text: 'Especial' }
                ]
            };
        }

        // Sistema de menu inteligente sem scroll
        function initIntelligentMenu() {
            const menuContainer = document.getElementById('menuAutoLayout');
            if (!menuContainer) return;
            
            const menuItems = menuContainer.querySelectorAll('.sidebar-menu-item');
            const itemCount = menuItems.length;
            
            // Remove classes existentes
            menuContainer.classList.remove('size-small', 'size-medium', 'size-large');
            
            // Aplica layout baseado no n√∫mero de itens
            if (itemCount <= 8) {
                menuContainer.classList.add('size-small');
            } else if (itemCount <= 11) {
                menuContainer.classList.add('size-medium');
            } else {
                menuContainer.classList.add('size-large');
            }
            
            console.log(`Menu inteligente: ${itemCount} se√ß√µes organizadas automaticamente`);
        }

        // Fun√ß√£o para alternar sidebar no mobile
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const mobileToggle = document.querySelector('.mobile-toggle');
            
            sidebar.classList.toggle('active');
            
            // Atualiza o √≠cone do bot√£o
            if (sidebar.classList.contains('active')) {
                mobileToggle.innerHTML = '‚úï';
                mobileToggle.style.background = 'rgba(139, 21, 56, 0.9)';
            } else {
                mobileToggle.innerHTML = '‚ò∞';
                mobileToggle.style.background = 'rgba(184, 134, 11, 0.9)';
            }
        }
        
        // Fecha o menu ao clicar fora dele no mobile
        document.addEventListener('click', function(event) {
            const sidebar = document.getElementById('sidebar');
            const mobileToggle = document.querySelector('.mobile-toggle');
            
            if (window.innerWidth <= 768 && 
                !sidebar.contains(event.target) && 
                !mobileToggle.contains(event.target) &&
                sidebar.classList.contains('active')) {
                toggleSidebar();
            }
        });

        // Inicializar quando a p√°gina carregar
        document.addEventListener('DOMContentLoaded', function() {
            console.log('RamenK redesign loaded successfully!');
            initIntelligentMenu();
        });

        // Reinicializar se a janela for redimensionada
        window.addEventListener('resize', function() {
            setTimeout(initIntelligentMenu, 100);
        });
    </script>
</body>
</html>